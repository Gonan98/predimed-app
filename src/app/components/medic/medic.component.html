<div class="row mx-4">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <form (ngSubmit)="onSubmit()">
                    <input type="hidden" name="id" [(ngModel)]="user.id" />
                    <div class="mb-3">
                        <label class="form-label">Nombres:</label>
                        <input
                            type="text"
                            name="firstName"
                            class="form-control"
                            required
                            [(ngModel)]="user.firstName"
                        />
                    </div>
                    <div class="mb-3">
                        <label for="lastName" class="form-label">Apellidos:</label>
                        <input
                            type="text"
                            name="lastName"
                            class="form-control"
                            required
                            [(ngModel)]="user.lastName"
                        />
                    </div>
                    <div class="mb-3">
                        <label for="documentNumber" class="form-label">DNI:</label>
                        <input
                            type="text"
                            name="documentNumber"
                            class="form-control"
                            required
                            [(ngModel)]="user.documentNumber"
                        />
                    </div>
                    <div class="mb-3">
                        <label for="documentMedic" class="form-label">Doc. Médico</label>
                        <input
                            type="text"
                            name="documentMedic"
                            class="form-control"
                            required
                            [(ngModel)]="user.documentMedic"
                        />
                    </div>
                    <div class="mb-3">
                        <label for="gender" class="form-label">Sexo:</label>
                        <select
                            id="gender"
                            class="form-select"
                            name="gender"
                            [(ngModel)]="user.gender"
                        >
                            <option selected disabled>Seleccionar</option>
                            <option value="M">Masculino</option>
                            <option value="F">Femenino</option>
                            <option value="X">Prefiero no decirlo</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="profession" class="form-label">Profesión</label>
                        <select
                            id="profesion"
                            class="form-select"
                            name="profesion"
                            [(ngModel)]="user.profession"
                        >
                            <option value="Doctor">Doctor</option>
                            <option value="Pediatra">Pediatra</option>
                            <option value="Cirujano">Cirujano</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="colegio" class="form-label">Colegio</label>
                        <select
                            id="colegio"
                            class="form-select"
                            name="colegio"
                        >
                            <option value="Colegio del Perú">Colegio del Perú</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="employeeStatus" class="form-label">Estado Laboral</label>
                        <input
                            type="text"
                            name="employeeStatus"
                            class="form-control"
                            required
                            [(ngModel)]="user.employeeStatus"
                        />
                    </div>
                    <div class="mb-3">
                        <label for="workingCondition" class="form-label">Condición Laboral</label>
                        <select
                            id="gender"
                            class="form-select"
                            name="profesion"
                            [(ngModel)]="user.workingCondition"
                        >
                        <option value="Contrato">Contrato</option>
                        <option value="Practicas">Practicas</option>
                        </select>
                    </div>
                    <button type="submit" class="btn" [ngClass]="{'btn-info': !user.id, 'btn-warning': user.id}">
                        {{ user.id ? 'Actualizar' : 'Registrar' }}
                    </button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Nombres</th>
                    <th scope="col">Apellidos</th>
                    <th scope="col">DNI</th>
                    <th scope="col">Doc. Médico</th>
                    <th scope="col">Profesión</th>
                    <th scope="col">Colegio</th>
                    <th scope="col">Acción</th>
                    <th scope="col">Credenciales</th>
                    <th scope="col">Estado Laboral</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let u of users">
                    <td>{{ u.id }}</td>
                    <td>{{ u.firstName }}</td>
                    <td>{{ u.lastName }}</td>
                    <td>{{ u.documentNumber }}</td>
                    <td>{{ u.documentMedic }}</td>
                    <td>{{ u.profession }}</td>
                    <td>Colegio del Perú</td>
                    <td>{{ u.employeeStatus }}</td>
                    <td>
                        <button class="btn btn-secondary btn-sm" (click)="handleEdit(u)">
                            <i class="bi" [ngClass]="{'bi-x': user.id === u.id, 'bi-pencil-fill': user.id !== u.id }"></i>
                        </button>
                        <button class="btn btn-danger btn-sm" (click)="deleteUser(u.id!)">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </td>
                    <td>
                        <button class="btn btn-primary btn-sm" (click)="onClickModal(u)" data-bs-toggle="modal" data-bs-target="#credentialsModal">
                            <i class="bi bi-person-lines-fill"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="credentialsModal" tabindex="-1" aria-labelledby="credentialsModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">{{ userModal.firstName }} {{ userModal.lastName }}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Usuario: {{userModal.username}}</p>
          <p>Contraseña: {{userModal.password}}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
</div>